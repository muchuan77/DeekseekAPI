# è°£è¨€æº¯æºç³»ç»Ÿåç«¯æœåŠ¡

## é¡¹ç›®ç®€ä»‹

æœ¬åç«¯æœåŠ¡æ˜¯è°£è¨€æº¯æºç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼ŒåŸºäºSpring Boot 2.7.12å¼€å‘ï¼Œé›†æˆäº†DeepSeek APIã€Elasticsearchã€åŒºå—é“¾ç­‰æŠ€æœ¯ï¼Œæä¾›è°£è¨€æ£€æµ‹ã€ä¼ æ’­è¿½è¸ªç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ğŸš€ æ ¸å¿ƒç‰¹æ€§
- **å¤šæ¨¡æ€è°£è¨€æ£€æµ‹**: æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤šç§å½¢å¼çš„å†…å®¹åˆ†æ
- **æ™ºèƒ½ä¼ æ’­è¿½è¸ª**: åŸºäºå›¾è®ºå’Œæœºå™¨å­¦ä¹ ç®—æ³•åˆ†æä¼ æ’­è·¯å¾„
- **åŒºå—é“¾å­˜è¯**: å…³é”®æ•°æ®ä¸Šé“¾ï¼Œç¡®ä¿æ•°æ®ä¸å¯ç¯¡æ”¹
- **å®æ—¶æ•°æ®åˆ†æ**: æä¾›å¤šç»´åº¦çš„æ•°æ®ç»Ÿè®¡å’Œå¯è§†åŒ–
- **æƒé™ç®¡ç†**: åŸºäºRBACçš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- **è½¯åˆ é™¤æ”¯æŒ**: æ‰€æœ‰å®ä½“æ”¯æŒè½¯åˆ é™¤
- **ä¹è§‚é”æ”¯æŒ**: æ‰€æœ‰å®ä½“æ”¯æŒä¹è§‚é”
- **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰å…³é”®æ“ä½œ
- **åˆ†å¸ƒå¼ç¼“å­˜**: ä½¿ç”¨Redisè¿›è¡Œç¼“å­˜ç®¡ç†
- **å…¨æ–‡æœç´¢**: ä½¿ç”¨Elasticsearchè¿›è¡Œé«˜æ•ˆæ£€ç´¢
- **å¤šç¯å¢ƒé…ç½®**: æ”¯æŒå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒé…ç½®
- **Excelå¯¼å‡º**: æ”¯æŒæ•°æ®å¯¼å‡ºä¸ºExcelæ ¼å¼
- **ç›‘æ§æŒ‡æ ‡**: Spring Boot Actuatoré›†æˆPrometheusç›‘æ§
- **è‡ªåŠ¨åŒ–æµ‹è¯•**: å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **ä»£ç è´¨é‡**: SonarCloudè´¨é‡åˆ†æå’ŒJaCoCoè¦†ç›–ç‡æŠ¥å‘Š
- **CI/CDé›†æˆ**: GitHub Actionsè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¡†æ¶
- Spring Boot 2.7.12ï¼šæä¾›å¿«é€Ÿå¼€å‘æ¡†æ¶
- Spring Securityï¼šå®‰å…¨è®¤è¯å’Œæˆæƒ
- Spring Data JPAï¼šæ•°æ®æŒä¹…åŒ–
- Spring Data Redisï¼šç¼“å­˜ç®¡ç†
- Spring Data Elasticsearchï¼šå…¨æ–‡æœç´¢
- Spring Cloud OpenFeignï¼šæœåŠ¡é—´é€šä¿¡
- Spring Data RESTï¼šRESTful APIæ”¯æŒ
- Spring Data Enversï¼šå®¡è®¡æ—¥å¿—æ”¯æŒ

### æ•°æ®å­˜å‚¨
- MySQL 8.0ï¼šå…³ç³»å‹æ•°æ®å­˜å‚¨
  - ç”¨æˆ·ä¿¡æ¯
  - è°£è¨€è®°å½•
  - æ“ä½œæ—¥å¿—
  - è¯„è®ºç³»ç»Ÿ
  - åˆ†æç»“æœ
- Redisï¼šç¼“å­˜æœåŠ¡
  - ä¼šè¯ç®¡ç†
  - çƒ­ç‚¹æ•°æ®ç¼“å­˜
  - åˆ†å¸ƒå¼é”
- Elasticsearch 7.17.4ï¼šå…¨æ–‡æœç´¢
  - è°£è¨€å†…å®¹ç´¢å¼•
  - å¿«é€Ÿæ£€ç´¢
  - èšåˆåˆ†æ
- åŒºå—é“¾ï¼šæ•°æ®å­˜è¯
  - å…³é”®æ•°æ®ä¸Šé“¾
  - æ•°æ®ä¸å¯ç¯¡æ”¹
  - æ—¶é—´æˆ³æœåŠ¡

### AIæœåŠ¡é›†æˆ
- DeepSeek API
  - æ–‡æœ¬åˆ†æ
  - å›¾åƒè¯†åˆ«
  - è§†é¢‘åˆ†æ
  - å¤šæ¨¡æ€èåˆ
  - æƒ…æ„Ÿåˆ†æ
  - å¯ä¿¡åº¦è¯„ä¼°

### å¼€å‘å·¥å…·ä¸ç›‘æ§
- **ä»£ç å·¥å…·**
  - Lombokï¼šç®€åŒ–ä»£ç 
  - MapStruct 1.5.3ï¼šå¯¹è±¡æ˜ å°„
  - Mavenï¼šä¾èµ–ç®¡ç†
  - SpringDoc OpenAPI 1.7.0ï¼šAPIæ–‡æ¡£
  - Apache POI 5.2.3ï¼šExcelå¤„ç†
- **ç›‘æ§ä¸æµ‹è¯•**
  - Spring Boot Actuatorï¼šåº”ç”¨ç›‘æ§æŒ‡æ ‡
  - Micrometerï¼šæŒ‡æ ‡æ”¶é›†æ¡†æ¶
  - JaCoCoï¼šä»£ç è¦†ç›–ç‡åˆ†æ
  - JUnit 5ï¼šå•å…ƒæµ‹è¯•æ¡†æ¶
  - Testcontainersï¼šé›†æˆæµ‹è¯•
- **CI/CDå·¥å…·**
  - GitHub Actionsï¼šè‡ªåŠ¨åŒ–CI/CD
  - SonarCloudï¼šä»£ç è´¨é‡åˆ†æ
  - Dockerï¼šå®¹å™¨åŒ–éƒ¨ç½²
  - Maven Surefireï¼šæµ‹è¯•æŠ¥å‘Š

## ç³»ç»Ÿè¦æ±‚

### å¼€å‘ç¯å¢ƒ
- JDK 18+
- Maven 3.8+
- Git 2.30+
- IDE (æ¨èä½¿ç”¨IntelliJ IDEA)

### è¿è¡Œç¯å¢ƒ
- MySQL 8.0+
- Redis 6.x+
- Elasticsearch 7.17.4+
- åŒºå—é“¾èŠ‚ç‚¹
- æ“ä½œç³»ç»Ÿï¼šLinux/Windows/macOS

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### æ•°æ®åº“é…ç½®
```sql
CREATE DATABASE rumor_tracing CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### Redisé…ç½®
```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password: your_password
    database: 0
    timeout: 10000
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1
```

#### Elasticsearché…ç½®
```yaml
spring:
  elasticsearch:
    rest:
      uris: http://localhost:9200
      username: elastic
      password: your_password
    connection-timeout: 5000
    socket-timeout: 5000
```

### 2. ç¼–è¯‘ä¸æµ‹è¯•
```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean install

# è¿è¡Œå•å…ƒæµ‹è¯•
mvn test

# ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š
mvn clean test jacoco:report

# è·³è¿‡æµ‹è¯•å¿«é€Ÿæ„å»º
mvn clean install -DskipTests
```

### 3. è¿è¡Œé¡¹ç›®
```bash
# å¼€å‘ç¯å¢ƒ
mvn spring-boot:run

# æŒ‡å®šé…ç½®æ–‡ä»¶
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# ç”Ÿäº§ç¯å¢ƒ
java -jar target/rumor-tracing-1.0.0.jar

# å¯ç”¨ç›‘æ§ç«¯ç‚¹
java -jar target/rumor-tracing-1.0.0.jar --management.endpoints.web.exposure.include=*
```

### 4. ç›‘æ§æ£€æŸ¥
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/actuator/health

# æŸ¥çœ‹åº”ç”¨ä¿¡æ¯
curl http://localhost:8080/actuator/info

# æŸ¥çœ‹æŒ‡æ ‡
curl http://localhost:8080/actuator/metrics

# PrometheusæŒ‡æ ‡
curl http://localhost:8080/actuator/prometheus
```

## é¡¹ç›®ç»“æ„

```
src/main/java/com/rumor/tracing/
â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”œâ”€â”€ OpenApiConfig.java
â”‚   â”œâ”€â”€ MessageConfig.java
â”‚   â”œâ”€â”€ LogConfig.java
â”‚   â”œâ”€â”€ LogSecurityConfig.java
â”‚   â”œâ”€â”€ LogElasticsearchConfig.java
â”‚   â”œâ”€â”€ JpaConfig.java
â”‚   â”œâ”€â”€ RestTemplateConfig.java
â”‚   â””â”€â”€ BlockchainConfig.java
â”œâ”€â”€ controller/      # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ AuthController.java
â”‚   â”œâ”€â”€ UserController.java
â”‚   â”œâ”€â”€ RumorController.java
â”‚   â”œâ”€â”€ CommentController.java
â”‚   â”œâ”€â”€ DeepSeekAnalysisController.java
â”‚   â”œâ”€â”€ LogController.java
â”‚   â”œâ”€â”€ PermissionController.java
â”‚   â”œâ”€â”€ PropagationController.java
â”‚   â”œâ”€â”€ BlockchainController.java
â”‚   â””â”€â”€ SystemController.java
â”œâ”€â”€ service/         # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ impl/
â”‚   â”‚   â”œâ”€â”€ UserServiceImpl.java
â”‚   â”‚   â”œâ”€â”€ RumorServiceImpl.java
â”‚   â”‚   â”œâ”€â”€ OperationLogServiceImpl.java
â”‚   â”‚   â”œâ”€â”€ PropagationAnalysisServiceImpl.java
â”‚   â”‚   â”œâ”€â”€ DeepSeekAIServiceImpl.java
â”‚   â”‚   â””â”€â”€ BlockchainServiceImpl.java
â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”œâ”€â”€ UserService.java
â”‚   â”œâ”€â”€ RumorService.java
â”‚   â”œâ”€â”€ CommentService.java
â”‚   â”œâ”€â”€ DeepSeekAIService.java
â”‚   â”œâ”€â”€ OperationLogService.java
â”‚   â”œâ”€â”€ PropagationAnalysisService.java
â”‚   â”œâ”€â”€ LoggingService.java
â”‚   â”œâ”€â”€ PermissionService.java
â”‚   â”œâ”€â”€ BlockchainService.java
â”‚   â””â”€â”€ SystemService.java
â”œâ”€â”€ repository/      # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ entity/         # å®ä½“ç±»
â”‚   â”œâ”€â”€ User.java
â”‚   â”œâ”€â”€ Rumor.java
â”‚   â”œâ”€â”€ Comment.java
â”‚   â”œâ”€â”€ LogOperation.java
â”‚   â”œâ”€â”€ LogAudit.java
â”‚   â”œâ”€â”€ LogSystem.java
â”‚   â”œâ”€â”€ RumorAnalysis.java
â”‚   â”œâ”€â”€ DeepSeekAnalysis.java
â”‚   â”œâ”€â”€ PropagationPath.java
â”‚   â”œâ”€â”€ InfluenceAnalysis.java
â”‚   â”œâ”€â”€ BlockchainRecord.java
â”‚   â””â”€â”€ BaseEntity.java
â”œâ”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ exception/      # å¼‚å¸¸å¤„ç†
â”œâ”€â”€ security/       # å®‰å…¨ç›¸å…³
â”œâ”€â”€ model/          # æ•°æ®æ¨¡å‹
â””â”€â”€ RumorTracingApplication.java
```

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- JWT tokenè®¤è¯
  - ç™»å½•è®¤è¯
  - ç”¨æˆ·æ³¨å†Œ
  - å¯†ç é‡ç½®
  - Tokenåˆ·æ–°
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
  - ADMINï¼šç³»ç»Ÿç®¡ç†å‘˜
  - MODERATORï¼šå†…å®¹å®¡æ ¸å‘˜
  - USERï¼šæ™®é€šç”¨æˆ·
- æƒé™æ³¨è§£
  - @RequiresAdmin
  - @RequiresModerator
  - @RequiresUser
  - @RequiresPermission

### 2. è°£è¨€æ£€æµ‹æœåŠ¡
- æ–‡æœ¬åˆ†æ
  - å…³é”®è¯æå–
  - æƒ…æ„Ÿåˆ†æ
  - å¯ä¿¡åº¦è¯„ä¼°
  - è¯­ä¹‰åˆ†æ
  - å®ä½“è¯†åˆ«
- å›¾åƒè¯†åˆ«
  - å›¾åƒå†…å®¹åˆ†æ
  - å›¾åƒç¯¡æ”¹æ£€æµ‹
  - OCRæ–‡å­—è¯†åˆ«
  - å›¾åƒç›¸ä¼¼åº¦åˆ†æ
- è§†é¢‘åˆ†æ
  - è§†é¢‘å†…å®¹è¯†åˆ«
  - å…³é”®å¸§æå–
  - è§†é¢‘æ‘˜è¦ç”Ÿæˆ
  - è§†é¢‘ç›¸ä¼¼åº¦åˆ†æ
- å¤šæ¨¡æ€èåˆ
  - ç‰¹å¾èåˆ
  - å†³ç­–èåˆ
  - è·¨æ¨¡æ€æ£€ç´¢
  - å¤šæ¨¡æ€åˆ†ç±»

### 3. ä¼ æ’­è¿½è¸ªæœåŠ¡
- ä¼ æ’­è·¯å¾„åˆ†æ
  - ä¼ æ’­ç½‘ç»œæ„å»º
  - å…³é”®èŠ‚ç‚¹è¯†åˆ«
  - ä¼ æ’­è·¯å¾„å¯è§†åŒ–
  - ä¼ æ’­é€Ÿåº¦åˆ†æ
  - ä¼ æ’­èŒƒå›´åˆ†æ
- å½±å“åŠ›è¯„ä¼°
  - ç”¨æˆ·å½±å“åŠ›è®¡ç®—
  - å†…å®¹ä¼ æ’­åŠ›è¯„ä¼°
  - ä¼ æ’­è·¯å¾„åˆ†æ
  - å½±å“åŠ›é¢„æµ‹
- å®æ—¶ç›‘æ§
  - ä¼ æ’­è¶‹åŠ¿åˆ†æ
  - å¼‚å¸¸ä¼ æ’­æ£€æµ‹
  - ä¼ æ’­è·¯å¾„è¿½è¸ª
  - å®æ—¶å‘Šè­¦

### 4. åŒºå—é“¾å­˜è¯æœåŠ¡
- æ•°æ®ä¸Šé“¾
  - å…³é”®æ•°æ®å“ˆå¸Œ
  - æ—¶é—´æˆ³æœåŠ¡
  - æ•°æ®éªŒè¯
  - å­˜è¯æŸ¥è¯¢
- æ™ºèƒ½åˆçº¦
  - å­˜è¯åˆçº¦
  - éªŒè¯åˆçº¦
  - æŸ¥è¯¢åˆçº¦
- åŒºå—é“¾é›†æˆ
  - èŠ‚ç‚¹ç®¡ç†
  - äº¤æ˜“ç®¡ç†
  - åŒºå—æŸ¥è¯¢
  - äº‹ä»¶ç›‘å¬

### 5. æ—¥å¿—ç®¡ç†æœåŠ¡
- æ“ä½œæ—¥å¿—
  - ç”¨æˆ·æ“ä½œè®°å½•
  - ç³»ç»Ÿæ“ä½œè®°å½•
  - å®¡è®¡æ—¥å¿—
  - æ€§èƒ½æ—¥å¿—
- ç³»ç»Ÿæ—¥å¿—
  - é”™è¯¯æ—¥å¿—
  - æ€§èƒ½æ—¥å¿—
  - å®‰å…¨æ—¥å¿—
  - è®¿é—®æ—¥å¿—
- æ—¥å¿—åˆ†æ
  - æ—¥å¿—èšåˆ
  - å¼‚å¸¸æ£€æµ‹
  - æ€§èƒ½åˆ†æ
  - å®‰å…¨åˆ†æ

## APIæ–‡æ¡£

ç³»ç»Ÿä½¿ç”¨SpringDoc OpenAPIæä¾›APIæ–‡æ¡£ï¼š

- Swagger UIï¼š`http://localhost:8080/swagger-ui.html`
- OpenAPIè§„èŒƒï¼š`http://localhost:8080/v3/api-docs`

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- éµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ
- ä½¿ç”¨Lombokç®€åŒ–ä»£ç 
- ä½¿ç”¨MapStructè¿›è¡Œå¯¹è±¡æ˜ å°„
- æäº¤ä¿¡æ¯éµå¾ªAngularæäº¤è§„èŒƒ
- ä»£ç æ³¨é‡Šè§„èŒƒ
- å‘½åè§„èŒƒ
- å¼‚å¸¸å¤„ç†è§„èŒƒ

### åˆ†æ”¯ç®¡ç†
- mainï¼šä¸»åˆ†æ”¯
- developï¼šå¼€å‘åˆ†æ”¯
- feature/*ï¼šåŠŸèƒ½åˆ†æ”¯
- hotfix/*ï¼šä¿®å¤åˆ†æ”¯
- release/*ï¼šå‘å¸ƒåˆ†æ”¯

### ç‰ˆæœ¬ç®¡ç†
- éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
- ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§æ›´æ–°
- æ¬¡ç‰ˆæœ¬å·ï¼šåŠŸèƒ½æ›´æ–°
- ä¿®è®¢å·ï¼šé—®é¢˜ä¿®å¤
- é¢„å‘å¸ƒç‰ˆæœ¬ï¼šalpha/beta/rc

## å¸¸è§é—®é¢˜

### æ•°æ®åº“è¿æ¥é—®é¢˜
1. æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
2. éªŒè¯æ•°æ®åº“è¿æ¥ä¿¡æ¯
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æ£€æŸ¥è¿æ¥æ± é…ç½®
5. æ£€æŸ¥æ•°æ®åº“æƒé™

### Redisè¿æ¥é—®é¢˜
1. æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
2. éªŒè¯Redisé…ç½®
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
4. æ£€æŸ¥ç½‘ç»œè¿æ¥
5. æ£€æŸ¥Redisç‰ˆæœ¬å…¼å®¹æ€§

### Elasticsearchè¿æ¥é—®é¢˜
1. æ£€æŸ¥ElasticsearchæœåŠ¡çŠ¶æ€
2. éªŒè¯Elasticsearché…ç½®
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æ£€æŸ¥ç´¢å¼•çŠ¶æ€
5. æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. å‘èµ·Pull Request
5. ç­‰å¾…å®¡æ ¸
6. åˆå¹¶ä»£ç 

## è®¸å¯è¯

MIT License 